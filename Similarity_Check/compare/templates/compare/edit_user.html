{% extends 'base_dashboard.html' %}
{% load static %}
{% load widget_tweaks %}

{% block title %}Edit User{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto bg-white/90 backdrop-blur-md p-10 rounded-xl shadow-2xl border border-yellow-300 mt-8">

  <!-- Header + Back Button -->
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-3xl font-extrabold text-yellow-600 flex items-center gap-2">
      <!-- ✏️ Icon -->
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2v-5m-5.586-7.414a2 2 0 112.828 2.828L11 16l-4 1 1-4 8.586-8.586z" />
      </svg>
      Edit User
    </h2>
    <a href="{% url 'users_list' %}" class="text-sm bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-md shadow transition flex items-center gap-1">
      <!-- 🔙 Icon -->
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
      Back to Users
    </a>
  </div>

  <form method="post" class="space-y-6">
    {% csrf_token %}
    {% for field in form %}
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          {{ field.label_tag }}
        </label>
        {{ field|add_class:"w-full rounded-md border-gray-300 shadow-sm focus:ring-2 focus:ring-yellow-400 px-3 py-2 text-sm" }}
        {% if field.help_text %}
          <p class="text-gray-500 text-xs mt-1">{{ field.help_text }}</p>
        {% endif %}
        {% if field.errors %}
          <p class="text-red-600 text-sm mt-1">{{ field.errors }}</p>
        {% endif %}
      </div>
    {% endfor %}

    <!-- Role Dropdown -->
    <div>
      <label for="role" class="block text-sm font-medium text-gray-700 mb-1">Select Role</label>
      <select name="role" id="role" required
              class="w-full rounded-md border-gray-300 shadow-sm focus:ring-2 focus:ring-yellow-400 px-3 py-2 text-sm">
        <option value="">-- Choose Role --</option>
        <option value="Admin" {% if selected_role == 'Admin' %}selected{% endif %}>Admin</option>
        <option value="Supervisor" {% if selected_role == 'Supervisor' %}selected{% endif %}>Supervisor</option>
        <option value="Student" {% if selected_role == 'Student' %}selected{% endif %}>Student</option>
      </select>
    </div>

    <!-- Submit Button -->
    <button type="submit"
            class="w-full bg-gradient-to-r from-yellow-600 to-yellow-500 hover:from-yellow-700 hover:to-yellow-600 text-white font-bold py-3 px-4 rounded-md shadow-md transition duration-300 flex items-center justify-center gap-2">
      <!-- 💾 Icon -->
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
      </svg>
      Update User
    </button>
  </form>
</div>
{% endblock %}
